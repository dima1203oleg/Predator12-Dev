groups:
- name: data-quality-alerts
  rules:
  - alert: HighErrorRate
    expr: rate(dq_validation_errors_total[5m]) > 0.1
    for: 10m
    labels:
      severity: critical
    annotations:
      summary: "High data validation error rate"
      description: "Error rate {{ $value }} exceeds 0.1 errors/sec"

  - alert: LowCompleteness
    expr: dq_field_completeness_ratio < 0.9
    for: 30m
    labels:
      severity: warning
    annotations:
      summary: "Field completeness below 90%"
      description: "{{ $labels.field }} is only {{ $value }} complete"

  - alert: ProcessingLag
    expr: time() - dq_last_success_timestamp > 3600
    labels:
      severity: critical
    annotations:
      summary: "ETL pipeline delayed"
      description: "No successful runs for 1 hour"
