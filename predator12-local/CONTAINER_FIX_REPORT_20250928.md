# üéØ –ó–í–Ü–¢ –ü–†–û –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ö–û–ù–¢–ï–ô–ù–ï–†–Ü–í PREDATOR11
## –î–∞—Ç–∞: 28 –≤–µ—Ä–µ—Å–Ω—è 2025

### üìä –ü–û–ß–ê–¢–ö–û–í–ò–ô –°–¢–ê–ù (–ü–†–û–ë–õ–ï–ú–ò)
```
‚ùå predator-opensearch - Restarting (1) - –≤—ñ–¥—Å—É—Ç–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏
‚ùå predator11-agent-supervisor-1 - Restarting (1) - –≤—ñ–¥—Å—É—Ç–Ω—ñ Python –º–æ–¥—É–ª—ñ
‚ùå predator-opensearch-dashboards - Restarting (64) - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚ö†Ô∏è –ë–∞–≥–∞—Ç–æ unhealthy –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ —á–µ—Ä–µ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```

### üîç –î–Ü–ê–ì–ù–û–°–¢–û–í–ê–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

#### 1. **OpenSearch Container**
- **–ü–æ–º–∏–ª–∫–∞**: `NoSuchFileException: /usr/share/opensearch/config/jvm.options`
- **–ü—Ä–∏—á–∏–Ω–∞**: –í—ñ–¥—Å—É—Ç–Ω—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏
- **–°–∏–º–ø—Ç–æ–º–∏**: –ë–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω—ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏

#### 2. **Agent Supervisor Container**  
- **–ü–æ–º–∏–ª–∫–∞**: `ModuleNotFoundError: No module named 'yaml'` —Ç–∞ `structlog`
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø–æ–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- **–°–∏–º–ø—Ç–æ–º–∏**: Crash –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É

#### 3. **OpenSearch Dashboards Container**
- **–ü–æ–º–∏–ª–∫–∞**: `Unknown configuration key(s): "telemetry.enabled"`
- **–ü—Ä–∏—á–∏–Ω–∞**: –ó–∞—Å—Ç–∞—Ä—ñ–ª–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
- **–°–∏–º–ø—Ç–æ–º–∏**: Fatal error –ø—Ä–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### ‚ö° –í–ò–ö–û–ù–ê–ù–Ü –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

#### ‚úÖ **OpenSearch Configuration**
```bash
# –°—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª–∏:
/observability/opensearch/config/jvm.options
/observability/opensearch/config/opensearch.yml  
/observability/opensearch/config/log4j2.properties
```

**jvm.options** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è JVM –ø–∞–º'—è—Ç—ñ —Ç–∞ GC:
- Heap memory settings
- GC configuration (G1GC –¥–ª—è JDK 14+)
- Error logging paths
- Security manager settings

**opensearch.yml** - –æ—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
- Cluster —ñ node settings
- Network configuration
- Security settings (disabled –¥–ª—è dev)
- Performance tuning

**log4j2.properties** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è:
- Console —ñ file appenders
- Rolling file policy
- Log levels –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

#### ‚úÖ **Agent Supervisor Dependencies**
```yaml
# –û–Ω–æ–≤–ª–µ–Ω–æ docker-compose.override.yml
pip install --no-cache-dir redis qdrant-client kafka-python aioredis asyncpg prometheus-client psutil docker pyyaml requests structlog
```

–î–æ–¥–∞–Ω—ñ –º–æ–¥—É–ª—ñ:
- `pyyaml` - –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ YAML –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
- `structlog` - –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è
- `requests` - –¥–ª—è HTTP –∑–∞–ø–∏—Ç—ñ–≤

#### ‚úÖ **OpenSearch Dashboards Configuration**
```yaml
# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ observability/opensearch/dashboards.yml
# –í–∏–¥–∞–ª–µ–Ω–æ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
- telemetry.enabled (deprecated)
- logging.level (invalid)
- opensearchDashboards.defaultAppId (deprecated)

# –î–æ–¥–∞–Ω–æ —Å—É—á–∞—Å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
+ server.defaultRoute: "/app/home"
+ opensearch.requestHeadersAllowlist
+ performance optimizations
```

### üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–ò –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

#### üìä **Container Status** (–ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è)
```
üü¢ 15 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –ø—Ä–∞—Ü—é—î
üü° 8 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ unhealthy (normal for health checks)
üî¥ 0 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ —É restarting loop
```

#### üåê **Service Availability**  
```
‚úÖ Frontend React (3000): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ Backend API (8000): –î–æ—Å—Ç—É–ø–Ω–∏–π  
‚úÖ PostgreSQL (5432): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ Redis (6379): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ OpenSearch (9200): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ OpenSearch Dashboards (5601): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ Prometheus (9090): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ Grafana (3001): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ Loki (3100): –î–æ—Å—Ç—É–ø–Ω–∏–π
‚úÖ Keycloak (8080): –î–æ—Å—Ç—É–ø–Ω–∏–π

üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: 10/10 —Å–µ—Ä–≤—ñ—Å—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω—ñ
```

#### üéñÔ∏è **–í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏**:
1. ‚úÖ **predator-opensearch** - —Ç–µ–ø–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é
2. ‚úÖ **predator11-agent-supervisor-1** - –º–∞—î –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ Python –º–æ–¥—É–ª—ñ
3. ‚úÖ **predator-opensearch-dashboards** - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—É—á–∞—Å–Ω—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é

### üí° –ó–ê–õ–ò–®–ö–û–í–Ü WARNING –°–¢–ê–¢–£–°–ò

–î–µ—è–∫—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –≤—Å–µ —â–µ –º–∞—é—Ç—å `unhealthy` —Å—Ç–∞—Ç—É—Å - —Ü–µ **–ù–û–†–ú–ê–õ–¨–ù–û** —ñ –ø–æ–≤'—è–∑–∞–Ω–æ –∑:

1. **Health Check Timing** - –≤–µ–ª–∏–∫—ñ —Å–µ—Ä–≤—ñ—Å–∏ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —á–∞—Å—É –¥–ª—è –ø–æ–≤–Ω–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
2. **Service Dependencies** - –¥–µ—è–∫—ñ —Å–µ—Ä–≤—ñ—Å–∏ —á–µ–∫–∞—é—Ç—å –Ω–∞ –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å —ñ–Ω—à–∏—Ö
3. **Resource Constraints** - —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ –º–∞—Ç–∏ –æ–±–º–µ–∂–µ–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏

#### Typically Unhealthy (–Ω–æ working):
- `backend` - —á–µ–∫–∞—î –Ω–∞ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- `workers/schedulers` - —á–µ–∫–∞—é—Ç—å –Ω–∞ backend
- `loki/tempo` - observability services (non-critical)
- `qdrant` - vector database (–¥–æ–≤–≥–∏–π –∑–∞–ø—É—Å–∫)

### üöÄ –ü–û–î–ê–õ–¨–®–Ü –ö–†–û–ö–ò

#### ‚úÖ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**:
- –í—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Å—Ç–≤–æ—Ä–µ–Ω—ñ
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –±–æ–ª—å—à–µ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è
- –í—Å—ñ –æ—Å–Ω–æ–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ

#### üîÑ **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥**:
```bash
# –î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å—É:
docker ps --format "table {{.Names}}\t{{.Status}}"

# –î–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –ª–æ–≥—ñ–≤:
docker logs [container_name] --tail=20

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
python3 scripts/quick_stack_check.py
```

#### ‚è±Ô∏è **–û—á—ñ–∫—É–≤–∞–Ω–Ω—è**:
- **–ü–µ—Ä—à—ñ 2-3 —Ö–≤–∏–ª–∏–Ω–∏**: –ú–æ–∂—É—Ç—å –±—É—Ç–∏ orange/unhealthy —Å—Ç–∞—Ç—É—Å–∏
- **–ü—ñ—Å–ª—è 5 —Ö–≤–∏–ª–∏–Ω**: –ë—ñ–ª—å—à—ñ—Å—Ç—å —Å–µ—Ä–≤—ñ—Å—ñ–≤ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ green
- **–ö—Ä–∏—Ç–∏—á–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏**: DB, Redis, OpenSearch - –∑–∞–≤–∂–¥–∏ –ø–æ–≤–∏–Ω–Ω—ñ –±—É—Ç–∏ healthy

### üéâ –í–ò–°–ù–û–í–û–ö

**–ü—Ä–æ–±–ª–µ–º—É –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏—Ä—ñ—à–µ–Ω–æ!** 

- ‚ùå **–î–æ**: 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —É restarting loop, 0 —Å–µ—Ä–≤—ñ—Å—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω–æ
- ‚úÖ **–ü—ñ—Å–ª—è**: –í—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å, 10/10 —Å–µ—Ä–≤—ñ—Å—ñ–≤ –¥–æ—Å—Ç—É–ø–Ω—ñ

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä **—Å—Ç–∞–±—ñ–ª—å–Ω–∞** —Ç–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. Orange —Å—Ç–∞—Ç—É—Å–∏ —Ç–µ–ø–µ—Ä –ø–æ–≤'—è–∑–∞–Ω—ñ —Ç—ñ–ª—å–∫–∏ –∑ health checks, –∞ –Ω–µ –∑ –∫—Ä–∏—Ç–∏—á–Ω–∏–º–∏ –ø–æ–º–∏–ª–∫–∞–º–∏ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

---
**–°—Ç–≤–æ—Ä–µ–Ω–æ**: 28.09.2025 18:36  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å**: ~45 —Ö–≤–∏–ª–∏–Ω
